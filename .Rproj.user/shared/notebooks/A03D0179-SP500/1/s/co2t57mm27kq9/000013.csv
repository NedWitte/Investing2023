"0","#data preparation
sp500_df <- tq_index(""SP500"")
"
"2","Getting holdings for SP500
"
"0",""
"0","sp500_df_top10 <- sp500_df %>%"
"0","  arrange(desc(weight)) %>%"
"0","  slice(1:10)"
"0",""
"0","# Assuming sp500_df is your original dataframe"
"0","sp500_df_top10 <- sp500_df_top10 %>%"
"0","  arrange(desc(weight)) %>%"
"0","  slice(1:10) %>%"
"0","  bind_rows(data.frame(symbol = ""Top11-500"", company = ""Top11-500"" ,weight = (1-sum(sp500_df_top10$weight))))"
"0",""
"0",""
