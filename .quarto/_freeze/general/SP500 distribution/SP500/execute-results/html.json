{
  "hash": "b562d8ed73730a53dd65b9dc675c37c1",
  "result": {
    "markdown": "---\ntitle: \"The SP500\"\nauthor: \"JNW\"\ndescription: \"stuff\"\ndate: \"2023-08-04\"\nimage: sp500.png\n---\n\n\n**The SP500 index**\n\nThe monthly dividend stock\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\nThis is the distribution of the SP500. Scroll over the plot to get more detailed data.\n\n\n::: {.cell}\n\n:::\n\nSo it is nicely visible that the top 10 biggest companies by market capitalization are taking 30% of the cake.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(plotly)\n\n# Assuming sp500_df_top10 is your dataframe\nfig <- plot_ly(\n  labels = sp500_df_top10$symbol,\n  values = sp500_df_top10$weight,\n  type = \"pie\",\n  textinfo = \"label+percent\",\n  insidetextorientation = \"radial\",\n  sort = FALSE\n) %>%\nlayout(\n  title = \"Top 10 Stocks by Weight\",\n  scene = list(\n    annotations = list(\n      text = sp500_df_top10$company,\n      x = 0.5,\n      y = 0.5,\n      showarrow = FALSE,\n      font = list(size = 5)\n    )\n  )\n)\n\n# Display the interactive 3D pie chart\nfig\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-be403907530abeeb8004\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-be403907530abeeb8004\">{\"x\":{\"visdat\":{\"3d9c5aff02\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"3d9c5aff02\",\"attrs\":{\"3d9c5aff02\":{\"labels\":[\"AAPL\",\"MSFT\",\"AMZN\",\"NVDA\",\"GOOGL\",\"META\",\"TSLA\",\"GOOG\",\"BRK-B\",\"UNH\",\"Top11-500\"],\"values\":[0.0699987707303217,0.0649754300610823,0.0336065264907116,0.0297331616537041,0.020694553473066,0.018545687244525,0.0179404852421269,0.0178566900423964,0.0171239997004299,0.0125932071551878,0.696931488206448],\"textinfo\":\"label+percent\",\"insidetextorientation\":\"radial\",\"sort\":false,\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"pie\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"title\":\"Top 10 Stocks by Weight\",\"scene\":{\"annotations\":{\"text\":[\"APPLE INC\",\"MICROSOFT CORP\",\"AMAZON.COM INC\",\"NVIDIA CORP\",\"ALPHABET INC CL A\",\"META PLATFORMS INC CLASS A\",\"TESLA INC\",\"ALPHABET INC CL C\",\"BERKSHIRE HATHAWAY INC CL B\",\"UNITEDHEALTH GROUP INC\",\"Top11-500\"],\"x\":0.5,\"y\":0.5,\"showarrow\":false,\"font\":{\"size\":5}}},\"hovermode\":\"closest\",\"showlegend\":true},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"labels\":[\"AAPL\",\"MSFT\",\"AMZN\",\"NVDA\",\"GOOGL\",\"META\",\"TSLA\",\"GOOG\",\"BRK-B\",\"UNH\",\"Top11-500\"],\"values\":[0.0699987707303217,0.0649754300610823,0.0336065264907116,0.0297331616537041,0.020694553473066,0.018545687244525,0.0179404852421269,0.0178566900423964,0.0171239997004299,0.0125932071551878,0.696931488206448],\"textinfo\":\"label+percent\",\"insidetextorientation\":\"radial\",\"sort\":false,\"type\":\"pie\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.2/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}